---
title: 前端路由的出现
categories:
 - Vue-router
tags:
 - 前端路由、SPA、SEO

---

# {{ $frontmatter.title }}

## 传统页面
- 在前端技术早期，一个 url 对应一个页面，如果要切换页面，就会重新进行html、css等静态资源的请求，组合成一个新的页面；显然，页面的不断请求对用户体验非常不友好。

:boom: **为了解决这个问题，SPA出现了**


## SPA（single-page-application）
- 单页面通过一次性把项目中用到的html、css、js请求回来，它通过js动态重写当前页面来与用户交互，这种方法避免了页面之间切换打断用户体验，页面切换更加流畅。

- 但是在 SPA 诞生之初，人们并没有考虑到“定位”这个问题——在内容切换前后，页面的 URL 都是一样的，这就带来了两个问题：

    - SPA 其实并不知道当前的页面“进展到了哪一步”。我们前进到某个页面时，此时只要刷新一下页面，一切就会被清零，必须重复之前的操作、才可以重新对内容进行定位——SPA 并不会“记住”你的操作。
    - 由于有且仅有一个 URL 给页面做映射，这对 SEO 也不够友好，搜索引擎无法收集全面的信息

:boom: 为了解决SPA出现的问题，就出现了前端路由

## 前端路由的出现

- 单页面只有一个URL，但是我们又想要一个URL对应一个页面，前端路由就是一个专门维护组件和URL之间的对应关系的东西；

- 它根据浏览器地址栏pathname的变化，来匹配相应的页面组件，然后将其通过创建DOM节点的形式，塞入根节点中，这样就达到了无刷新页面切换的效果。


- 前端路由可以帮助我们在仅有一个页面的情况下，“记住”用户当前走到了哪一步——为 SPA 中的各个视图匹配一个唯一标识。这意味着用户前进、后退触发的新内容，都会映射到不同的 URL 上去。此时即便他刷新页面，因为当前的 URL 可以标识出他所处的位置，因此内容也不会丢失。


## 实现原理

:one: **hash模式**
- 通过hashchange事件监听url的变化，以当前的hash作为索引加载相应的页面资源，从而跳转到对应的子页面

:one: **history模式**
- 通过popstate事件监听url的变化，但是pushState/repaceState（H5的api，可以改变地址栏而不引起页面变化）点击事件并不会自动触发popstate事件（history.back()/history.forward()才会自动触发），我们可以通过pushState改变地址后手动调用popstate的回调函数去匹配相应的路由。

## 如何给SPA做SEO

:one: **SSR服务端渲染**
- 将组件或页面通过服务端生成html再返回浏览器

:two: **静态化**
- 目前主流的静态化主要有两种：
    - 一种是通过程序将动态页面抓取并保存为静态页面，这样的页面的实际存在于服务器的硬盘中
    - 另外一种是通过WEB服务器的 URL Rewrite的方式，它的原理是通过web服务器内部模块按一定规则将外部的URL请求转化为内部的文件地址，一句话来说就是把外部请求的静态地址转化为实际的动态页面地址，而静态页面实际是不存在的。这两种方法都达到了实现URL静态化的效果
